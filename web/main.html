<head>
  <title>Email, Bitcoin</title>
</head>

<body>
    <div fit horizontal center-justified layout center>
        {{> topBar}}
        
        {{> UI.dynamic template=subscribeStatus }} <!-- intro | signup | signup_done -->
    </div>
    
<!--
    {{> signup}}
-->

    <!--  <h1>Mail protected by Bitcoin payment</h1>
  <p> Create an email alias @bost.me. It has to be paid to send a message to this email.
  All unpaid emails are rejected with "pay form" reply. Whitelist sender to make sender free to send messages 
  </p>-->

</body>

<template name="topBar">
    <div class="top_bar">
        <div>
            <a href="/"><img src="img/logo.png" class="logo"></a>
        </div>
        <div class="align_right" style="float: right">
            <a href="/#/howitworks" >How it will work</a>
        </div>
    </div>
</template>

<template name="intro">
    <div class="content align_center">
        <span style="display: block; height:50px"></span>
        <h1>Make people think twice before they send you an email</h1>
        <h3 class="comment">Charge for each mail you have read</h3>
        <span style="display: block; height:50px"></span>
        <button id="getEmail">Get your public email</button>
    </div>
</template>

<template name="signup">
    <div style="line-height: 1.4" class="content align_center">
        <span style="display: block; height:30px"></span>
        <h2>Forward emails from<br>
            <div class="input input-{{aliasValidateStatus}}" id="alias" contenteditable="true" data-ph="your.name" spellcheck="false"></div>@wrte.io to
            <div class="error error-{{aliasValidateStatus}}" id="aliasError">
                {{#case aliasValidateStatus='alias_empty'}}
                Name is empty
                {{/case}}
                {{#case aliasValidateStatus='alias_wrong_syntax'}}
                No whitespaces allowed!
                {{/case}}
                {{#case aliasValidateStatus='alias_exists'}}
                This name has been taken
                {{/case}}
            </div>
            <br>
            <div class="input input-{{emailValidateStatus}}" id="email" contenteditable="true" data-ph="your.private@email.com" spellcheck="false"></div>
            <div class="error error-{{emailValidateStatus}}" id="emailError">
                {{#case emailValidateStatus='email_empty'}}
                Email field is empty
                {{/case}}
                {{#case emailValidateStatus='email_wrong_syntax'}}
                Wrong format
                {{/case}}
                {{#case emailValidateStatus='email_exists'}}
                The email has already been registered
                {{/case}}
            </div>
            <br>
            when <div class="input input-{{priceValidateStatus}}" id="price" contenteditable="true" data-ph="0.1" spellcheck="false" ></div>
            <div id="estimation">≈ ${{mBTCRate}}</div> 
            <div class="error error-{{priceValidateStatus}}">
                {{#case priceValidateStatus='price_nan'}}
                Must be a number 
                {{/case}}
                {{#case priceValidateStatus='price_toosmall'}}
                Can not be less than 1 satoshi (1 / 100 000 000 BTC)
                {{/case}}

            </div> bitcoin was paid
        </h2>
        <span style="display: block; height:30px"></span>
        <!--<div>{{errorMessage}}</div>-->
        <button>Create an account</button>
    </div>
</template>

<template name="signup_done">
    <div style="line-height: 1.4" class="content align_center">
        <h1>Done!</h1>
        <h3>You have succesfully created {{registredEmail}}</h3>
        <h3>We are developing it right now, so we would forward all emails.</h3>
        <span style="display: block; height:50px"></span>
        <a href="" id="linkToHow">How it will work</a>
    </div>
</template>

<template name="how">
    <div style="width: 100%; height: 100%; overflow-y: auto;">
        <div style="line-height: 1.4; margin: 100px auto;" class="content  align_center">
            <h4>How it will work</h4>
            <span style="display: block; height:50px"></span>
            <div horizontal layout center>
                <h2 class="numbering">1</h2>
                <h2 class="align_left">A sender sends email to your account at wrte.io</h2>
            </div>
            <img src="img/how_1.png">
            <span style="display: block; height:80px"></span>
            <div horizontal layout center>
                <h2 class="numbering">2</h2>
                <h2 class="align_left">We send him an invoice</h2>
            </div>
            <img src="img/how_1.png">
            <span style="display: block; height:80px"></span>
            <div horizontal layout center>
                <h2 class="numbering">3</h2>
                <h2 class="align_left">Once he has paid it we forward his message to your personal email</h2>
            </div>
            <img src="img/how_1.png">
            <span style="display: block; height:80px"></span>
            <div horizontal layout center>
                <h2 class="numbering">4</h2>
                <h2 class="align_left">When you open email we charge sender and transfer bitcoins to your account</h2>
            </div>
            <img src="img/how_1.png">
            <span style="display: block; height:80px"></span>
            <h1>Questions?</h1>
            <h3>Write us at <a href="mailto:support@wrte.io">support@wrte.io</a></h3>
        </div>
    </div>
</template>



<template name="signup2">
  {{> step1}}
  {{> step2}}
  <!--{{#if lastError}}-->
  <!--error: {{lastError}}-->
  <!--{{/if}}-->
  <button>sign up</button>
</template>

<template name="step1">
<p>
    <input type="text" id="alias" placeholder="john.smith"/>@bost.me forwards to 
    <input type="text" id="email" placeholder="john.smith@gmail.com"/> 
    <br> {{aliasValidateStatus}} / {{emailValidateStatus}}
</p>
</template>

<template name="step2">
<p>
price per message <input id="price" type="text" placeholder="1">mBTC (≈{{mBTCRate}}$)  
</p>
<p>
<ul>
    <li><input type="radio" name="dest" checked value="create"/> create wallet on coinbase to receive payments </li>
    <li><input type="radio" name="dest" value="use"/> specify existing bitcoin address
    <input type="text" id="btcAddress" placeholder="17RaXYmZLVmLt2Gf2yo1MdTod7gEn4uKcW"/>  </li>
    <!--<li><input type="radio" name="dest"/> send money to watsi.org charity</li>-->
</ul>
</p>
</template>

<template name="_case_default">
  {{> UI.contentBlock}}
</template>

